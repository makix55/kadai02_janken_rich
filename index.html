<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ã„ã£ãã‚…ã†ã•ã‚“ã‚«ãƒ¼ãƒ‰ã‚²ãƒ¼ãƒ </title>
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <div class="content">
        <h1 id="title"></h1>
        <p>ã€Œ1ã€ã€Œ3ã€ã€Œ9ã€ãŒå‡ºãŸã‚‰ã€ã‚«ãƒ¼ãƒ‰ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ã­ğŸ˜†<br>
            ãã‚Œä»¥å¤–ã®æ•°å­—ãŒå‡ºãŸã‚‰ã€ã‚«ãƒ¼ãƒ‰ã‚’ã‚¯ãƒªãƒƒã‚¯ã›ãšã«ã€Œã‚«ãƒ¼ãƒ‰ã‚’ã‚ãã‚‹ã€ãƒœã‚¿ãƒ³ã‚’æŠ¼ã—ã¦ã­ï¼<br>
            ã€ŒStartã€ã‚’æŠ¼ã—ã¦ã€ã‚²ãƒ¼ãƒ çµ‚äº†å¾Œã«ã€ŒStopã€ã‚’æŠ¼ã™ã¨ã€ç§’æ•°ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã‚ˆâ°<br>
            ã‚«ãƒ¼ãƒ‰ã¯å…¨éƒ¨ã§13æšã€‚3æšå–ã‚Œã‚Œã°å®Œç’§ã ã‚ˆğŸ‘Œ</p>
    </div>
    <div id="message">â˜…â˜…â˜…â˜…â˜…</div>
    <div id="game-board">
        <div id="current-card" class="card">?</div>
        <button id="next-card-button">ã‚«ãƒ¼ãƒ‰ã‚’ã‚ãã‚‹</button>
    </div>
    <p>
        <input type="button" value="Start" id="startcount">
        <input type="button" value="Stop" id="endcount">
    </p>
    <p id="PassageArea">â˜…â˜…â˜…â˜…â˜…</p>

    <div id="score-board">
        <p>â˜…ã‚²ãƒƒãƒˆã—ãŸãƒˆãƒ©ãƒ³ãƒ—ã®æšæ•°â˜…: <span id="score">0</span></p>
    </div>

    <button id="restart-button">Continue</button>

    <script>
        document.addEventListener("DOMContentLoaded", () => {
            const scoreDisplay = document.getElementById("score");
            const messageDisplay = document.getElementById("message");
            const currentCard = document.getElementById("current-card");
            const nextCardButton = document.getElementById("next-card-button");
            const restartButton = document.getElementById("restart-button");
            const title = document.getElementById("title");
            const passageArea = document.getElementById("PassageArea");
            const startButton = document.getElementById("startcount");

            const text = "ã„ã£ãã‚…ã†ã•ã‚“ã‚«ãƒ¼ãƒ‰ã‚²ãƒ¼ãƒ ";
            let index = 0;
            let score = 0;
            let currentCardValue = 0;
            let deck = generateDeck();
            let PassSec = 0;
            let PassageID = null;

            function generateDeck() {
                return Array.from({ length: 13 }, (_, i) => i + 1).sort(() => Math.random() - 0.5);
            }

            currentCard.textContent = "";

            function showNextCard() {
                if (deck.length === 0) {
                    messageDisplay.textContent = "ã‚²ãƒ¼ãƒ ãŒçµ‚ã‚ã£ãŸã‚ˆğŸ˜Š";
                    nextCardButton.disabled = true;
                    stopShowing();
                    return;
                }

                currentCardValue = deck.pop();
                const suits = ["â™¥", "â™¦", "â™ ", "â™£"];
                const suit = suits[Math.floor(Math.random() * suits.length)];
                let displayValue = currentCardValue;
                if (currentCardValue === 1) displayValue = "A";
                else if (currentCardValue === 11) displayValue = "J";
                else if (currentCardValue === 12) displayValue = "Q";
                else if (currentCardValue === 13) displayValue = "K";

                currentCard.textContent = `${suit} ${displayValue}`;
                if (suit === "â™¥" || suit === "â™¦") {
                    currentCard.classList.add("red");
                    currentCard.classList.remove("black");
                } else {
                    currentCard.classList.add("black");
                    currentCard.classList.remove("red");
                }

                messageDisplay.textContent = "ã€Œ1ã€ã€Œ3ã€ã€Œ9ã€ãŒå‡ºãŸã‚‰ã€ã‚«ãƒ¼ãƒ‰ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ã­";
            }

            currentCard.addEventListener("click", () => {
                if (currentCardValue === 1 || currentCardValue === 3 || currentCardValue === 9) {
                    score++;
                    scoreDisplay.textContent = `${score}`;
                    messageDisplay.textContent = `${currentCardValue} ã‚²ãƒƒãƒˆ`;
                } else {
                    messageDisplay.textContent = "æ®‹å¿µğŸ˜¢æ¬¡ã¸";
                }
                showNextCard();
            });

            nextCardButton.addEventListener("click", showNextCard);

            function resetGame() {
                score = 0;
                scoreDisplay.textContent = score;
                messageDisplay.textContent = "ã‚²ãƒ¼ãƒ ã‚’å†é–‹ã™ã‚‹æº–å‚™ãŒã§ãã¾ã—ãŸï¼";
                nextCardButton.disabled = false;
                deck = generateDeck();
                currentCard.textContent = "";
                stopShowing();
                PassageID = null;
            }

            restartButton.addEventListener("click", resetGame);

            function showNextCharacter() {
                if (index < text.length) {
                    title.textContent += text.charAt(index);
                    index++;
                    setTimeout(showNextCharacter, 500);
                }
            }
            showNextCharacter();

            function showPassage() {
                PassSec++;
                var msg = "ãƒœã‚¿ãƒ³ã‚’æŠ¼ã—ã¦ã‹ã‚‰ " + PassSec + "ç§’";
                passageArea.innerHTML = msg;
            }

            function startShowing() {
                if (PassageID !== null) return;
                PassSec = 0;
                PassageID = setInterval(showPassage, 1000);
                nextCardButton.disabled = false;
            }

            function resetTimer() {
                PassSec = 0;
                passageArea.innerHTML = "â˜…â˜…â˜…â˜…â˜…";
                stopShowing();
            }

            function stopShowing() {
                if (PassageID !== null) {
                    clearInterval(PassageID);
                    PassageID = null;
                }
            }

            startButton.addEventListener("click", () => {
                resetTimer();
                startShowing();
            });
        });
    </script>
</body>

</html>